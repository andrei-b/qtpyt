<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QtPyT: include/qtpyt/qpysharedarray.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">QtPyT<span id="projectnumber">&#160;0.0.1</span>
   </div>
   <div id="projectbrief">Interoperation between multi-threaded Python and C++/Qt</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function() { init_codefold(0); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_0d9fc1e1174d5f84f5492c6934d01ae4.html">qtpyt</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">qpysharedarray.h</div></div>
</div><!--header-->
<div class="contents">
<a href="qpysharedarray_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">// File: `include/qtpyt/qpysharedarray.h`</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="preprocessor">#pragma once</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span> </div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="preprocessor">#include &lt;QtCore/QSharedPointer&gt;</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="preprocessor">#include &lt;QtCore/QByteArray&gt;</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="preprocessor">#include &lt;QtCore/QtGlobal&gt;</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span> </div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="preprocessor">#include &lt;cstddef&gt;</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#include &lt;cstdint&gt;</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor">#include &lt;cstring&gt;</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &lt;type_traits&gt;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#include &lt;QMap&gt;</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#include &lt;QVariant&gt;</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span> </div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespaceqtpyt.html">qtpyt</a> {</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span> </div>
<div class="foldopen" id="foldopen00026" data-start="{" data-end="}">
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno"><a class="line" href="namespaceqtpyt_1_1detail.html">   26</a></span><span class="keyword">namespace </span>detail {</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span> </div>
<div class="foldopen" id="foldopen00032" data-start="{" data-end="};">
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno"><a class="line" href="structqtpyt_1_1detail_1_1OwnerState.html">   32</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structqtpyt_1_1detail_1_1OwnerState.html">OwnerState</a> {</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno"><a class="line" href="structqtpyt_1_1detail_1_1OwnerState.html#a2a9721308d6434d5bd54d0c3e8f7e5ac">   33</a></span>    <span class="keywordtype">void</span>* <a class="code hl_variable" href="structqtpyt_1_1detail_1_1OwnerState.html#a2a9721308d6434d5bd54d0c3e8f7e5ac">estate</a> = <span class="keyword">nullptr</span>;               </div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno"><a class="line" href="structqtpyt_1_1detail_1_1OwnerState.html#ac37d12668b53344b2a0cfd44cfb4998b">   34</a></span>    void (*<a class="code hl_variable" href="structqtpyt_1_1detail_1_1OwnerState.html#ac37d12668b53344b2a0cfd44cfb4998b">deleter</a>)(<span class="keywordtype">void</span>*) = <span class="keyword">nullptr</span>;     </div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span> </div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno"><a class="line" href="structqtpyt_1_1detail_1_1OwnerState.html#ad9051c845dc7a27c5a34b28fb976e7fa">   36</a></span>    <a class="code hl_function" href="structqtpyt_1_1detail_1_1OwnerState.html#ad9051c845dc7a27c5a34b28fb976e7fa">OwnerState</a>() = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno"><a class="line" href="structqtpyt_1_1detail_1_1OwnerState.html#a6630e4ada7700255e3f3261dca7a84b6">   37</a></span>    <a class="code hl_function" href="structqtpyt_1_1detail_1_1OwnerState.html#a6630e4ada7700255e3f3261dca7a84b6">OwnerState</a>(<span class="keywordtype">void</span>* c, <span class="keywordtype">void</span> (*d)(<span class="keywordtype">void</span>*)) : <a class="code hl_variable" href="structqtpyt_1_1detail_1_1OwnerState.html#a2a9721308d6434d5bd54d0c3e8f7e5ac">estate</a>(c), <a class="code hl_variable" href="structqtpyt_1_1detail_1_1OwnerState.html#ac37d12668b53344b2a0cfd44cfb4998b">deleter</a>(d) {}</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno"><a class="line" href="structqtpyt_1_1detail_1_1OwnerState.html#abf8ff68991e369d5f7d37bdf34e764ae">   38</a></span>    <a class="code hl_function" href="structqtpyt_1_1detail_1_1OwnerState.html#abf8ff68991e369d5f7d37bdf34e764ae">~OwnerState</a>() { <span class="keywordflow">if</span> (<a class="code hl_variable" href="structqtpyt_1_1detail_1_1OwnerState.html#ac37d12668b53344b2a0cfd44cfb4998b">deleter</a>) <a class="code hl_variable" href="structqtpyt_1_1detail_1_1OwnerState.html#ac37d12668b53344b2a0cfd44cfb4998b">deleter</a>(<a class="code hl_variable" href="structqtpyt_1_1detail_1_1OwnerState.html#a2a9721308d6434d5bd54d0c3e8f7e5ac">estate</a>); }</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span> </div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno"><a class="line" href="structqtpyt_1_1detail_1_1OwnerState.html#aed755c437ac1464b6fff11fe695110b0">   40</a></span>    <a class="code hl_function" href="structqtpyt_1_1detail_1_1OwnerState.html#aed755c437ac1464b6fff11fe695110b0">OwnerState</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structqtpyt_1_1detail_1_1OwnerState.html">OwnerState</a>&amp;) = <span class="keyword">delete</span>;</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno"><a class="line" href="structqtpyt_1_1detail_1_1OwnerState.html#af0725dd756ebb8bf8f82b9546722418f">   41</a></span>    <a class="code hl_struct" href="structqtpyt_1_1detail_1_1OwnerState.html">OwnerState</a>&amp; <a class="code hl_function" href="structqtpyt_1_1detail_1_1OwnerState.html#af0725dd756ebb8bf8f82b9546722418f">operator=</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structqtpyt_1_1detail_1_1OwnerState.html">OwnerState</a>&amp;) = <span class="keyword">delete</span>;</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>};</div>
</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span> </div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span> </div>
<div class="foldopen" id="foldopen00045" data-start="{" data-end="}">
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno"><a class="line" href="namespaceqtpyt_1_1detail.html#aa699c6a46404d74ec09f2a4ee24a9f5c">   45</a></span><span class="keyword">inline</span> std::shared_ptr&lt;OwnerState&gt; <a class="code hl_function" href="namespaceqtpyt_1_1detail.html#aa699c6a46404d74ec09f2a4ee24a9f5c">make_owner</a>(<span class="keywordtype">void</span>* estate, <span class="keywordtype">void</span> (*deleter)(<span class="keywordtype">void</span>*)) {</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>    <span class="keywordflow">return</span> std::make_shared&lt;OwnerState&gt;(estate, deleter);</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>}</div>
</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span> </div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>} <span class="comment">// namespace detail</span></div>
</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span> </div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span> </div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span><span class="keyword">class </span>external; </div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span> </div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="foldopen" id="foldopen00071" data-start="{" data-end="};">
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno"><a class="line" href="classqtpyt_1_1QPySharedArray.html">   71</a></span><span class="keyword">class </span><a class="code hl_class" href="classqtpyt_1_1QPySharedArray.html">QPySharedArray</a> {</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span><span class="keyword">public</span>:</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno"><a class="line" href="classqtpyt_1_1QPySharedArray.html#aba1ff66723d961c0d5d8edea31c064f3">   73</a></span>    <span class="keyword">using </span><a class="code hl_typedef" href="classqtpyt_1_1QPySharedArray.html#aba1ff66723d961c0d5d8edea31c064f3">value_type</a> = T;</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno"><a class="line" href="classqtpyt_1_1QPySharedArray.html#acc4ed92a8783dff81714dfdafa869e27">   74</a></span>    <span class="keyword">using </span><a class="code hl_typedef" href="classqtpyt_1_1QPySharedArray.html#acc4ed92a8783dff81714dfdafa869e27">size_type</a>  = qsizetype;</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span> </div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno"><a class="line" href="classqtpyt_1_1QPySharedArray.html#a82cf1e16655e7f2f0775e57e365267e9">   79</a></span>    <a class="code hl_function" href="classqtpyt_1_1QPySharedArray.html#a82cf1e16655e7f2f0775e57e365267e9">QPySharedArray</a>() : <a class="code hl_variable" href="classqtpyt_1_1QPySharedArray.html#ad4d762b7e043c106d43c207c145cea70">d_</a>(QSharedPointer&lt;<a class="code hl_struct" href="structqtpyt_1_1QPySharedArray_1_1Data.html">Data</a>&gt;::create()) {}</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span> </div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno"><a class="line" href="classqtpyt_1_1QPySharedArray.html#a01e342fdcb3e9a32626340e7fc442438">   85</a></span>    <span class="keyword">explicit</span> <a class="code hl_function" href="classqtpyt_1_1QPySharedArray.html#a01e342fdcb3e9a32626340e7fc442438">QPySharedArray</a>(<a class="code hl_typedef" href="classqtpyt_1_1QPySharedArray.html#acc4ed92a8783dff81714dfdafa869e27">size_type</a> n) : <a class="code hl_variable" href="classqtpyt_1_1QPySharedArray.html#ad4d762b7e043c106d43c207c145cea70">d_</a>(QSharedPointer&lt;<a class="code hl_struct" href="structqtpyt_1_1QPySharedArray_1_1Data.html">Data</a>&gt;::create()) { <a class="code hl_function" href="classqtpyt_1_1QPySharedArray.html#a37d2a085319ee12f71ae907f242d98cb">resize</a>(n); }</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span> </div>
<div class="foldopen" id="foldopen00095" data-start="{" data-end="}">
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno"><a class="line" href="classqtpyt_1_1QPySharedArray.html#a3403d6b6ef379604263def3143e17b89">   95</a></span>    <span class="keyword">static</span> <a class="code hl_class" href="classqtpyt_1_1QPySharedArray.html">QPySharedArray</a> <a class="code hl_function" href="classqtpyt_1_1QPySharedArray.html#a3403d6b6ef379604263def3143e17b89">wrap</a>(T* externalPtr, <a class="code hl_typedef" href="classqtpyt_1_1QPySharedArray.html#acc4ed92a8783dff81714dfdafa869e27">size_type</a> n, <span class="keywordtype">bool</span> takeOwnership = <span class="keyword">false</span>) {</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>        <a class="code hl_class" href="classqtpyt_1_1QPySharedArray.html">QPySharedArray</a> a;</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>        a.<a class="code hl_variable" href="classqtpyt_1_1QPySharedArray.html#ad4d762b7e043c106d43c207c145cea70">d_</a>-&gt;resetToExternal(externalPtr, n, takeOwnership, <span class="comment">/*owner*/</span><span class="keyword">nullptr</span>);</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>        <span class="keywordflow">return</span> a;</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>    }</div>
</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span> </div>
<div class="foldopen" id="foldopen00113" data-start="{" data-end="}">
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno"><a class="line" href="classqtpyt_1_1QPySharedArray.html#a4845c432fc911b6744c9bc97a7105a95">  113</a></span>    <span class="keyword">static</span> <a class="code hl_class" href="classqtpyt_1_1QPySharedArray.html">QPySharedArray</a> <a class="code hl_function" href="classqtpyt_1_1QPySharedArray.html#a4845c432fc911b6744c9bc97a7105a95">wrapWithOwner</a>(</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>        T* externalPtr,</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>        <a class="code hl_typedef" href="classqtpyt_1_1QPySharedArray.html#acc4ed92a8783dff81714dfdafa869e27">size_type</a> n,</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>        <span class="keywordtype">bool</span> takeOwnership,</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>        std::shared_ptr&lt;detail::OwnerState&gt; owner)</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>    {</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>        <a class="code hl_class" href="classqtpyt_1_1QPySharedArray.html">QPySharedArray</a> a;</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>        a.<a class="code hl_variable" href="classqtpyt_1_1QPySharedArray.html#ad4d762b7e043c106d43c207c145cea70">d_</a>-&gt;resetToExternal(externalPtr, n, takeOwnership, std::move(owner));</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>        <span class="keywordflow">return</span> a;</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>    }</div>
</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span> </div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno"><a class="line" href="classqtpyt_1_1QPySharedArray.html#a48e5c9f74ca7e25de06dd08a566da8ca">  128</a></span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="classqtpyt_1_1QPySharedArray.html#a48e5c9f74ca7e25de06dd08a566da8ca">isEmpty</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_function" href="classqtpyt_1_1QPySharedArray.html#ae324f7d11dafd4ca144c4a2d88b6113e">size</a>() == 0; }</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span> </div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno"><a class="line" href="classqtpyt_1_1QPySharedArray.html#ae324f7d11dafd4ca144c4a2d88b6113e">  134</a></span>    <a class="code hl_typedef" href="classqtpyt_1_1QPySharedArray.html#acc4ed92a8783dff81714dfdafa869e27">size_type</a> <a class="code hl_function" href="classqtpyt_1_1QPySharedArray.html#ae324f7d11dafd4ca144c4a2d88b6113e">size</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="classqtpyt_1_1QPySharedArray.html#ad4d762b7e043c106d43c207c145cea70">d_</a>-&gt;m_size; }</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span> </div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno"><a class="line" href="classqtpyt_1_1QPySharedArray.html#a14cc2dcb68ef2743a84730bf9eca2ec9">  140</a></span>    <a class="code hl_typedef" href="classqtpyt_1_1QPySharedArray.html#acc4ed92a8783dff81714dfdafa869e27">size_type</a> <a class="code hl_function" href="classqtpyt_1_1QPySharedArray.html#a14cc2dcb68ef2743a84730bf9eca2ec9">capacity</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="classqtpyt_1_1QPySharedArray.html#ad4d762b7e043c106d43c207c145cea70">d_</a>-&gt;m_capacity; }</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span> </div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno"><a class="line" href="classqtpyt_1_1QPySharedArray.html#a733eee0d65b3573df6e81cedf8336063">  146</a></span>    <span class="keyword">const</span> T* <a class="code hl_function" href="classqtpyt_1_1QPySharedArray.html#a733eee0d65b3573df6e81cedf8336063">constData</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="classqtpyt_1_1QPySharedArray.html#ad4d762b7e043c106d43c207c145cea70">d_</a>-&gt;ptr(); }</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span> </div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno"><a class="line" href="classqtpyt_1_1QPySharedArray.html#a8513f9cc35daa34afe22809502d5c04f">  152</a></span>    T* <a class="code hl_function" href="classqtpyt_1_1QPySharedArray.html#a8513f9cc35daa34afe22809502d5c04f">data</a>() { <a class="code hl_function" href="classqtpyt_1_1QPySharedArray.html#acfa8738857cfdc070d3efbb13f28e915">detach</a>(); <span class="keywordflow">return</span> <a class="code hl_variable" href="classqtpyt_1_1QPySharedArray.html#ad4d762b7e043c106d43c207c145cea70">d_</a>-&gt;ptr(); }</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span> </div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno"><a class="line" href="classqtpyt_1_1QPySharedArray.html#a7fecef1b9cb09716566fcca81d176bec">  159</a></span>    <span class="keyword">const</span> T&amp; <a class="code hl_function" href="classqtpyt_1_1QPySharedArray.html#a7fecef1b9cb09716566fcca81d176bec">operator[]</a>(<a class="code hl_typedef" href="classqtpyt_1_1QPySharedArray.html#acc4ed92a8783dff81714dfdafa869e27">size_type</a> i)<span class="keyword"> const </span>{ Q_ASSERT(i &gt;= 0 &amp;&amp; i &lt; <a class="code hl_function" href="classqtpyt_1_1QPySharedArray.html#ae324f7d11dafd4ca144c4a2d88b6113e">size</a>()); <span class="keywordflow">return</span> <a class="code hl_function" href="classqtpyt_1_1QPySharedArray.html#a733eee0d65b3573df6e81cedf8336063">constData</a>()[i]; }</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span> </div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno"><a class="line" href="classqtpyt_1_1QPySharedArray.html#a993b261c780d6c6422a3212de9662ff4">  166</a></span>    T&amp; <a class="code hl_function" href="classqtpyt_1_1QPySharedArray.html#a993b261c780d6c6422a3212de9662ff4">operator[]</a>(<a class="code hl_typedef" href="classqtpyt_1_1QPySharedArray.html#acc4ed92a8783dff81714dfdafa869e27">size_type</a> i) { Q_ASSERT(i &gt;= 0 &amp;&amp; i &lt; <a class="code hl_function" href="classqtpyt_1_1QPySharedArray.html#ae324f7d11dafd4ca144c4a2d88b6113e">size</a>()); <span class="keywordflow">return</span> <a class="code hl_function" href="classqtpyt_1_1QPySharedArray.html#a8513f9cc35daa34afe22809502d5c04f">data</a>()[i]; }</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span> </div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno"><a class="line" href="classqtpyt_1_1QPySharedArray.html#a07b096349ae34cd7db14c010321f0410">  171</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classqtpyt_1_1QPySharedArray.html#a07b096349ae34cd7db14c010321f0410">clear</a>() { <a class="code hl_function" href="classqtpyt_1_1QPySharedArray.html#a37d2a085319ee12f71ae907f242d98cb">resize</a>(0); }</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span> </div>
<div class="foldopen" id="foldopen00177" data-start="{" data-end="}">
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno"><a class="line" href="classqtpyt_1_1QPySharedArray.html#a37d2a085319ee12f71ae907f242d98cb">  177</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classqtpyt_1_1QPySharedArray.html#a37d2a085319ee12f71ae907f242d98cb">resize</a>(<a class="code hl_typedef" href="classqtpyt_1_1QPySharedArray.html#acc4ed92a8783dff81714dfdafa869e27">size_type</a> n) {</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>        <span class="keywordflow">if</span> (n == <a class="code hl_variable" href="classqtpyt_1_1QPySharedArray.html#ad4d762b7e043c106d43c207c145cea70">d_</a>-&gt;m_size) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>        <a class="code hl_function" href="classqtpyt_1_1QPySharedArray.html#acfa8738857cfdc070d3efbb13f28e915">detach</a>();</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>        <a class="code hl_variable" href="classqtpyt_1_1QPySharedArray.html#ad4d762b7e043c106d43c207c145cea70">d_</a>-&gt;resize(n);</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>    }</div>
</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span> </div>
<div class="foldopen" id="foldopen00187" data-start="{" data-end="}">
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno"><a class="line" href="classqtpyt_1_1QPySharedArray.html#ac65a83ac33a86da0a5d826eea28925ca">  187</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classqtpyt_1_1QPySharedArray.html#ac65a83ac33a86da0a5d826eea28925ca">reserve</a>(<a class="code hl_typedef" href="classqtpyt_1_1QPySharedArray.html#acc4ed92a8783dff81714dfdafa869e27">size_type</a> n) {</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>        <span class="keywordflow">if</span> (n &lt;= d_-&gt;m_capacity) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>        <a class="code hl_function" href="classqtpyt_1_1QPySharedArray.html#acfa8738857cfdc070d3efbb13f28e915">detach</a>();</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>        <a class="code hl_variable" href="classqtpyt_1_1QPySharedArray.html#ad4d762b7e043c106d43c207c145cea70">d_</a>-&gt;reserve(n);</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>    }</div>
</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span> </div>
<div class="foldopen" id="foldopen00199" data-start="{" data-end="}">
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno"><a class="line" href="classqtpyt_1_1QPySharedArray.html#acfa8738857cfdc070d3efbb13f28e915">  199</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classqtpyt_1_1QPySharedArray.html#acfa8738857cfdc070d3efbb13f28e915">detach</a>() {</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>                <a class="code hl_variable" href="classqtpyt_1_1QPySharedArray.html#ad4d762b7e043c106d43c207c145cea70">d_</a> = QSharedPointer&lt;Data&gt;::create(*<a class="code hl_variable" href="classqtpyt_1_1QPySharedArray.html#ad4d762b7e043c106d43c207c145cea70">d_</a>);</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>    }</div>
</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span> </div>
<div class="foldopen" id="foldopen00208" data-start="{" data-end="}">
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno"><a class="line" href="classqtpyt_1_1QPySharedArray.html#aeb62bd2a87338c7016601788888629f1">  208</a></span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="classqtpyt_1_1QPySharedArray.html#aeb62bd2a87338c7016601788888629f1">isReadOnly</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classqtpyt_1_1QPySharedArray.html#ad4d762b7e043c106d43c207c145cea70">d_</a>-&gt;m_readonly;</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>    }</div>
</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span> </div>
<div class="foldopen" id="foldopen00217" data-start="{" data-end="}">
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno"><a class="line" href="classqtpyt_1_1QPySharedArray.html#a417492e55ed1615a4e64d45ae34e755a">  217</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classqtpyt_1_1QPySharedArray.html#a417492e55ed1615a4e64d45ae34e755a">setReadOnly</a>(<span class="keywordtype">bool</span> r) {</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>        <a class="code hl_function" href="classqtpyt_1_1QPySharedArray.html#acfa8738857cfdc070d3efbb13f28e915">detach</a>();</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>        <a class="code hl_variable" href="classqtpyt_1_1QPySharedArray.html#ad4d762b7e043c106d43c207c145cea70">d_</a>-&gt;m_readonly = r;</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>    }</div>
</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span> </div>
<div class="foldopen" id="foldopen00226" data-start="{" data-end="}">
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno"><a class="line" href="classqtpyt_1_1QPySharedArray.html#a2c85b1d705ebf1e1cb72bd6ea73f0c5c">  226</a></span>    <span class="keyword">operator</span> QVariant()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>        <span class="keywordflow">return</span> QVariant::fromValue(*<span class="keyword">this</span>);</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>    }</div>
</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span> </div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span><span class="keyword">private</span>:</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span> </div>
<div class="foldopen" id="foldopen00236" data-start="{" data-end="};">
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno"><a class="line" href="structqtpyt_1_1QPySharedArray_1_1Data.html">  236</a></span>    <span class="keyword">struct </span><a class="code hl_struct" href="structqtpyt_1_1QPySharedArray_1_1Data.html">Data</a> {</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span> </div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno"><a class="line" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a4f9dad6e41550fa544ae282838a37dc9">  238</a></span>        QByteArray <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a4f9dad6e41550fa544ae282838a37dc9">owned</a>;                             </div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno"><a class="line" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a8a25d86895886afb315be6a4d85a0acc">  239</a></span>        T* <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a8a25d86895886afb315be6a4d85a0acc">extPtr</a> = <span class="keyword">nullptr</span>;                          </div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span> </div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno"><a class="line" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a5c1e9a5b61eceba45f1b5633ac3551a1">  241</a></span>        <a class="code hl_typedef" href="classqtpyt_1_1QPySharedArray.html#acc4ed92a8783dff81714dfdafa869e27">size_type</a> <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a5c1e9a5b61eceba45f1b5633ac3551a1">m_size</a> = 0;                         </div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno"><a class="line" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a591c98e5fe796663f526041e08952d62">  242</a></span>        <a class="code hl_typedef" href="classqtpyt_1_1QPySharedArray.html#acc4ed92a8783dff81714dfdafa869e27">size_type</a> <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a591c98e5fe796663f526041e08952d62">m_capacity</a> = 0;                     </div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span> </div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno"><a class="line" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a9368e669664d333e4eb571c3a4b1f222">  244</a></span>        <span class="keywordtype">bool</span> <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a9368e669664d333e4eb571c3a4b1f222">m_external</a>{<span class="keyword">false</span>};                       </div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno"><a class="line" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a000a771ca297134b5f7dadf2d819c42a">  245</a></span>        <span class="keywordtype">bool</span> <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a000a771ca297134b5f7dadf2d819c42a">m_takeOwnership</a>{<span class="keyword">false</span>};                  </div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno"><a class="line" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a56b71c123b28eadc6f08f2fcb3fbfb21">  246</a></span>        <span class="keywordtype">bool</span> <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a56b71c123b28eadc6f08f2fcb3fbfb21">m_readonly</a>{<span class="keyword">false</span>};                       </div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span> </div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno"><a class="line" href="structqtpyt_1_1QPySharedArray_1_1Data.html#ae7f68b4e6ab7a25733afc014a05ab73e">  248</a></span>        std::shared_ptr&lt;detail::OwnerState&gt; <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#ae7f68b4e6ab7a25733afc014a05ab73e">owner</a>;    </div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span> </div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno"><a class="line" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a36a0b8b6179ee9a75dec0cafeda6fc1f">  250</a></span>        <a class="code hl_function" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a36a0b8b6179ee9a75dec0cafeda6fc1f">Data</a>() = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span> </div>
<div class="foldopen" id="foldopen00255" data-start="{" data-end="}">
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno"><a class="line" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a90bb1fc7771572e19f8f0bf7d642afe4">  255</a></span>        <a class="code hl_function" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a90bb1fc7771572e19f8f0bf7d642afe4">Data</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structqtpyt_1_1QPySharedArray_1_1Data.html">Data</a>&amp; o)</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>            : <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a4f9dad6e41550fa544ae282838a37dc9">owned</a>(o.<a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a4f9dad6e41550fa544ae282838a37dc9">owned</a>),</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>              <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a8a25d86895886afb315be6a4d85a0acc">extPtr</a>(o.<a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a8a25d86895886afb315be6a4d85a0acc">extPtr</a>),</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>              <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a5c1e9a5b61eceba45f1b5633ac3551a1">m_size</a>(o.<a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a5c1e9a5b61eceba45f1b5633ac3551a1">m_size</a>),</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>              <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a591c98e5fe796663f526041e08952d62">m_capacity</a>(o.<a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a591c98e5fe796663f526041e08952d62">m_capacity</a>),</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>              <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a9368e669664d333e4eb571c3a4b1f222">m_external</a>(o.<a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a9368e669664d333e4eb571c3a4b1f222">m_external</a>),</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>              <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a000a771ca297134b5f7dadf2d819c42a">m_takeOwnership</a>(o.<a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a000a771ca297134b5f7dadf2d819c42a">m_takeOwnership</a>),</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>              <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#ae7f68b4e6ab7a25733afc014a05ab73e">owner</a>(o.<a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#ae7f68b4e6ab7a25733afc014a05ab73e">owner</a>)</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>        {}</div>
</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span> </div>
<div class="foldopen" id="foldopen00265" data-start="{" data-end="}">
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno"><a class="line" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a84885a86652ceebdbd0b83d2481e3a04">  265</a></span>        <a class="code hl_function" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a84885a86652ceebdbd0b83d2481e3a04">~Data</a>() {</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a9368e669664d333e4eb571c3a4b1f222">m_external</a> &amp;&amp; <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a000a771ca297134b5f7dadf2d819c42a">m_takeOwnership</a> &amp;&amp; <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a8a25d86895886afb315be6a4d85a0acc">extPtr</a>) {</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>                <span class="keyword">delete</span>[] <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a8a25d86895886afb315be6a4d85a0acc">extPtr</a>;</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>            }</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>        }</div>
</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span> </div>
<div class="foldopen" id="foldopen00275" data-start="{" data-end="}">
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno"><a class="line" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a09bb52d8aee2441f64acf0b2cf2efdb3">  275</a></span>        T* <a class="code hl_function" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a09bb52d8aee2441f64acf0b2cf2efdb3">ptr</a>() {</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a9368e669664d333e4eb571c3a4b1f222">m_external</a> ? <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a8a25d86895886afb315be6a4d85a0acc">extPtr</a> : <span class="keyword">reinterpret_cast&lt;</span>T*<span class="keyword">&gt;</span>(<a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a4f9dad6e41550fa544ae282838a37dc9">owned</a>.data());</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>        }</div>
</div>
<div class="foldopen" id="foldopen00278" data-start="{" data-end="}">
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno"><a class="line" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a913a7ec8b9b5afb5bfb88b0dd6526fe1">  278</a></span>        <span class="keyword">const</span> T* <a class="code hl_function" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a913a7ec8b9b5afb5bfb88b0dd6526fe1">ptr</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a9368e669664d333e4eb571c3a4b1f222">m_external</a> ? <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a8a25d86895886afb315be6a4d85a0acc">extPtr</a> : <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>T*<span class="keyword">&gt;</span>(<a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a4f9dad6e41550fa544ae282838a37dc9">owned</a>.constData());</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>        }</div>
</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span> </div>
<div class="foldopen" id="foldopen00289" data-start="{" data-end="}">
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno"><a class="line" href="structqtpyt_1_1QPySharedArray_1_1Data.html#af5f494c3a2101ab22330e549696aea11">  289</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="structqtpyt_1_1QPySharedArray_1_1Data.html#af5f494c3a2101ab22330e549696aea11">resetToExternal</a>(T* p, <a class="code hl_typedef" href="classqtpyt_1_1QPySharedArray.html#acc4ed92a8783dff81714dfdafa869e27">size_type</a> n, <span class="keywordtype">bool</span> takeOwn, std::shared_ptr&lt;detail::OwnerState&gt; keepAlive) {</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>            <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a4f9dad6e41550fa544ae282838a37dc9">owned</a>.clear();</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>            <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a4f9dad6e41550fa544ae282838a37dc9">owned</a>.squeeze();</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>            <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a9368e669664d333e4eb571c3a4b1f222">m_external</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>            <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a8a25d86895886afb315be6a4d85a0acc">extPtr</a> = p;</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>            <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a5c1e9a5b61eceba45f1b5633ac3551a1">m_size</a> = n;</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>            <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a591c98e5fe796663f526041e08952d62">m_capacity</a> = n;</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>            <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a000a771ca297134b5f7dadf2d819c42a">m_takeOwnership</a> = takeOwn;</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>            <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#ae7f68b4e6ab7a25733afc014a05ab73e">owner</a> = std::move(keepAlive);</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>        }</div>
</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span> </div>
<div class="foldopen" id="foldopen00308" data-start="{" data-end="}">
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno"><a class="line" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a611e2372a29cc126e2516177ee3eeda7">  308</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a611e2372a29cc126e2516177ee3eeda7">ensureOwnedStorage</a>(<a class="code hl_typedef" href="classqtpyt_1_1QPySharedArray.html#acc4ed92a8783dff81714dfdafa869e27">size_type</a> cap) {</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a9368e669664d333e4eb571c3a4b1f222">m_external</a>) {</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a4f9dad6e41550fa544ae282838a37dc9">owned</a>.size() &lt; cap * (<span class="keywordtype">int</span>)<span class="keyword">sizeof</span>(T))</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>                    <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a4f9dad6e41550fa544ae282838a37dc9">owned</a>.resize(<span class="keywordtype">int</span>(cap * <span class="keyword">sizeof</span>(T)));</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>                <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a591c98e5fe796663f526041e08952d62">m_capacity</a> = cap;</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>            }</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span> </div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>            <span class="comment">// external -&gt; allocate owned and copy</span></div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>            QByteArray b;</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>            b.resize(<span class="keywordtype">int</span>(cap * <span class="keyword">sizeof</span>(T)));</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a8a25d86895886afb315be6a4d85a0acc">extPtr</a> &amp;&amp; <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a5c1e9a5b61eceba45f1b5633ac3551a1">m_size</a> &gt; 0)</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>                std::memcpy(b.data(), <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a8a25d86895886afb315be6a4d85a0acc">extPtr</a>, <span class="keywordtype">size_t</span>(<a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a5c1e9a5b61eceba45f1b5633ac3551a1">m_size</a>) * <span class="keyword">sizeof</span>(T));</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>            <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a4f9dad6e41550fa544ae282838a37dc9">owned</a> = std::move(b);</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span> </div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>            <span class="comment">// drop external view; owner may still exist but no longer needed</span></div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>            <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a9368e669664d333e4eb571c3a4b1f222">m_external</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>            <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a8a25d86895886afb315be6a4d85a0acc">extPtr</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>            <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a000a771ca297134b5f7dadf2d819c42a">m_takeOwnership</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>            <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#ae7f68b4e6ab7a25733afc014a05ab73e">owner</a>.reset();</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>            <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a591c98e5fe796663f526041e08952d62">m_capacity</a> = cap;</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>        }</div>
</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span> </div>
<div class="foldopen" id="foldopen00335" data-start="{" data-end="}">
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno"><a class="line" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a3856b683114451e937724b35f6afc281">  335</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a3856b683114451e937724b35f6afc281">reserve</a>(<a class="code hl_typedef" href="classqtpyt_1_1QPySharedArray.html#acc4ed92a8783dff81714dfdafa869e27">size_type</a> cap) {</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>            <span class="keywordflow">if</span> (cap &lt;= <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a591c98e5fe796663f526041e08952d62">m_capacity</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>            <a class="code hl_function" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a611e2372a29cc126e2516177ee3eeda7">ensureOwnedStorage</a>(cap);</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>        }</div>
</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span> </div>
<div class="foldopen" id="foldopen00348" data-start="{" data-end="}">
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno"><a class="line" href="structqtpyt_1_1QPySharedArray_1_1Data.html#ae819e56b3813b3562129be9814b0a72b">  348</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="structqtpyt_1_1QPySharedArray_1_1Data.html#ae819e56b3813b3562129be9814b0a72b">resize</a>(<a class="code hl_typedef" href="classqtpyt_1_1QPySharedArray.html#acc4ed92a8783dff81714dfdafa869e27">size_type</a> n) {</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>            <span class="keywordflow">if</span> (n &gt; <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a591c98e5fe796663f526041e08952d62">m_capacity</a>) <a class="code hl_function" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a3856b683114451e937724b35f6afc281">reserve</a>(std::max(n, <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a591c98e5fe796663f526041e08952d62">m_capacity</a> * 2));</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>            <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a5c1e9a5b61eceba45f1b5633ac3551a1">m_size</a> = n;</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a9368e669664d333e4eb571c3a4b1f222">m_external</a>) {</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>                <span class="comment">// keep QByteArray m_size consistent (so data() is valid)</span></div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>                <a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a4f9dad6e41550fa544ae282838a37dc9">owned</a>.resize(<span class="keywordtype">int</span>(<a class="code hl_variable" href="structqtpyt_1_1QPySharedArray_1_1Data.html#a591c98e5fe796663f526041e08952d62">m_capacity</a> * <span class="keyword">sizeof</span>(T)));</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>            }</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>        }</div>
</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>    };</div>
</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span> </div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno"><a class="line" href="classqtpyt_1_1QPySharedArray.html#ad4d762b7e043c106d43c207c145cea70">  358</a></span>    QSharedPointer&lt;Data&gt; <a class="code hl_variable" href="classqtpyt_1_1QPySharedArray.html#ad4d762b7e043c106d43c207c145cea70">d_</a>; </div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>};</div>
</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span> </div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>} <span class="comment">// namespace qtpyt</span></div>
<div class="ttc" id="aclassqtpyt_1_1QPySharedArray_html"><div class="ttname"><a href="classqtpyt_1_1QPySharedArray.html">qtpyt::QPySharedArray</a></div><div class="ttdoc">forward declaration for external usage in other headers</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00071">qpysharedarray.h:71</a></div></div>
<div class="ttc" id="aclassqtpyt_1_1QPySharedArray_html_a01e342fdcb3e9a32626340e7fc442438"><div class="ttname"><a href="classqtpyt_1_1QPySharedArray.html#a01e342fdcb3e9a32626340e7fc442438">qtpyt::QPySharedArray::QPySharedArray</a></div><div class="ttdeci">QPySharedArray(size_type n)</div><div class="ttdoc">Construct with n default-initialized elements.</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00085">qpysharedarray.h:85</a></div></div>
<div class="ttc" id="aclassqtpyt_1_1QPySharedArray_html_a07b096349ae34cd7db14c010321f0410"><div class="ttname"><a href="classqtpyt_1_1QPySharedArray.html#a07b096349ae34cd7db14c010321f0410">qtpyt::QPySharedArray::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdoc">Clear the array (resize to 0).</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00171">qpysharedarray.h:171</a></div></div>
<div class="ttc" id="aclassqtpyt_1_1QPySharedArray_html_a14cc2dcb68ef2743a84730bf9eca2ec9"><div class="ttname"><a href="classqtpyt_1_1QPySharedArray.html#a14cc2dcb68ef2743a84730bf9eca2ec9">qtpyt::QPySharedArray::capacity</a></div><div class="ttdeci">size_type capacity() const</div><div class="ttdoc">Current capacity in elements.</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00140">qpysharedarray.h:140</a></div></div>
<div class="ttc" id="aclassqtpyt_1_1QPySharedArray_html_a3403d6b6ef379604263def3143e17b89"><div class="ttname"><a href="classqtpyt_1_1QPySharedArray.html#a3403d6b6ef379604263def3143e17b89">qtpyt::QPySharedArray::wrap</a></div><div class="ttdeci">static QPySharedArray wrap(T *externalPtr, size_type n, bool takeOwnership=false)</div><div class="ttdoc">Wrap an external buffer as a QPySharedArray view.</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00095">qpysharedarray.h:95</a></div></div>
<div class="ttc" id="aclassqtpyt_1_1QPySharedArray_html_a37d2a085319ee12f71ae907f242d98cb"><div class="ttname"><a href="classqtpyt_1_1QPySharedArray.html#a37d2a085319ee12f71ae907f242d98cb">qtpyt::QPySharedArray::resize</a></div><div class="ttdeci">void resize(size_type n)</div><div class="ttdoc">Resize the array to n elements (may reallocate).</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00177">qpysharedarray.h:177</a></div></div>
<div class="ttc" id="aclassqtpyt_1_1QPySharedArray_html_a417492e55ed1615a4e64d45ae34e755a"><div class="ttname"><a href="classqtpyt_1_1QPySharedArray.html#a417492e55ed1615a4e64d45ae34e755a">qtpyt::QPySharedArray::setReadOnly</a></div><div class="ttdeci">void setReadOnly(bool r)</div><div class="ttdoc">Mark the array read-only. Detaches first so this affects only this instance. When set to true,...</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00217">qpysharedarray.h:217</a></div></div>
<div class="ttc" id="aclassqtpyt_1_1QPySharedArray_html_a4845c432fc911b6744c9bc97a7105a95"><div class="ttname"><a href="classqtpyt_1_1QPySharedArray.html#a4845c432fc911b6744c9bc97a7105a95">qtpyt::QPySharedArray::wrapWithOwner</a></div><div class="ttdeci">static QPySharedArray wrapWithOwner(T *externalPtr, size_type n, bool takeOwnership, std::shared_ptr&lt; detail::OwnerState &gt; owner)</div><div class="ttdoc">Wrap an external buffer and keep an owner object alive alongside it.</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00113">qpysharedarray.h:113</a></div></div>
<div class="ttc" id="aclassqtpyt_1_1QPySharedArray_html_a48e5c9f74ca7e25de06dd08a566da8ca"><div class="ttname"><a href="classqtpyt_1_1QPySharedArray.html#a48e5c9f74ca7e25de06dd08a566da8ca">qtpyt::QPySharedArray::isEmpty</a></div><div class="ttdeci">bool isEmpty() const</div><div class="ttdoc">Check whether the array is empty.</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00128">qpysharedarray.h:128</a></div></div>
<div class="ttc" id="aclassqtpyt_1_1QPySharedArray_html_a733eee0d65b3573df6e81cedf8336063"><div class="ttname"><a href="classqtpyt_1_1QPySharedArray.html#a733eee0d65b3573df6e81cedf8336063">qtpyt::QPySharedArray::constData</a></div><div class="ttdeci">const T * constData() const</div><div class="ttdoc">Const pointer to the element data.</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00146">qpysharedarray.h:146</a></div></div>
<div class="ttc" id="aclassqtpyt_1_1QPySharedArray_html_a7fecef1b9cb09716566fcca81d176bec"><div class="ttname"><a href="classqtpyt_1_1QPySharedArray.html#a7fecef1b9cb09716566fcca81d176bec">qtpyt::QPySharedArray::operator[]</a></div><div class="ttdeci">const T &amp; operator[](size_type i) const</div><div class="ttdoc">Const element access with bounds assertion.</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00159">qpysharedarray.h:159</a></div></div>
<div class="ttc" id="aclassqtpyt_1_1QPySharedArray_html_a82cf1e16655e7f2f0775e57e365267e9"><div class="ttname"><a href="classqtpyt_1_1QPySharedArray.html#a82cf1e16655e7f2f0775e57e365267e9">qtpyt::QPySharedArray::QPySharedArray</a></div><div class="ttdeci">QPySharedArray()</div><div class="ttdoc">Construct an empty QPySharedArray.</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00079">qpysharedarray.h:79</a></div></div>
<div class="ttc" id="aclassqtpyt_1_1QPySharedArray_html_a8513f9cc35daa34afe22809502d5c04f"><div class="ttname"><a href="classqtpyt_1_1QPySharedArray.html#a8513f9cc35daa34afe22809502d5c04f">qtpyt::QPySharedArray::data</a></div><div class="ttdeci">T * data()</div><div class="ttdoc">Mutable access to element data; detaches if necessary (copy-on-write).</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00152">qpysharedarray.h:152</a></div></div>
<div class="ttc" id="aclassqtpyt_1_1QPySharedArray_html_a993b261c780d6c6422a3212de9662ff4"><div class="ttname"><a href="classqtpyt_1_1QPySharedArray.html#a993b261c780d6c6422a3212de9662ff4">qtpyt::QPySharedArray::operator[]</a></div><div class="ttdeci">T &amp; operator[](size_type i)</div><div class="ttdoc">Mutable element access with detach semantics and bounds assertion.</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00166">qpysharedarray.h:166</a></div></div>
<div class="ttc" id="aclassqtpyt_1_1QPySharedArray_html_aba1ff66723d961c0d5d8edea31c064f3"><div class="ttname"><a href="classqtpyt_1_1QPySharedArray.html#aba1ff66723d961c0d5d8edea31c064f3">qtpyt::QPySharedArray::value_type</a></div><div class="ttdeci">T value_type</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00073">qpysharedarray.h:73</a></div></div>
<div class="ttc" id="aclassqtpyt_1_1QPySharedArray_html_ac65a83ac33a86da0a5d826eea28925ca"><div class="ttname"><a href="classqtpyt_1_1QPySharedArray.html#ac65a83ac33a86da0a5d826eea28925ca">qtpyt::QPySharedArray::reserve</a></div><div class="ttdeci">void reserve(size_type n)</div><div class="ttdoc">Ensure capacity for at least n elements.</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00187">qpysharedarray.h:187</a></div></div>
<div class="ttc" id="aclassqtpyt_1_1QPySharedArray_html_acc4ed92a8783dff81714dfdafa869e27"><div class="ttname"><a href="classqtpyt_1_1QPySharedArray.html#acc4ed92a8783dff81714dfdafa869e27">qtpyt::QPySharedArray::size_type</a></div><div class="ttdeci">qsizetype size_type</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00074">qpysharedarray.h:74</a></div></div>
<div class="ttc" id="aclassqtpyt_1_1QPySharedArray_html_acfa8738857cfdc070d3efbb13f28e915"><div class="ttname"><a href="classqtpyt_1_1QPySharedArray.html#acfa8738857cfdc070d3efbb13f28e915">qtpyt::QPySharedArray::detach</a></div><div class="ttdeci">void detach()</div><div class="ttdoc">Detach from shared data (copy the Data object).</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00199">qpysharedarray.h:199</a></div></div>
<div class="ttc" id="aclassqtpyt_1_1QPySharedArray_html_ad4d762b7e043c106d43c207c145cea70"><div class="ttname"><a href="classqtpyt_1_1QPySharedArray.html#ad4d762b7e043c106d43c207c145cea70">qtpyt::QPySharedArray::d_</a></div><div class="ttdeci">QSharedPointer&lt; Data &gt; d_</div><div class="ttdoc">shared data pointer</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00358">qpysharedarray.h:358</a></div></div>
<div class="ttc" id="aclassqtpyt_1_1QPySharedArray_html_ae324f7d11dafd4ca144c4a2d88b6113e"><div class="ttname"><a href="classqtpyt_1_1QPySharedArray.html#ae324f7d11dafd4ca144c4a2d88b6113e">qtpyt::QPySharedArray::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdoc">Number of elements currently stored/referenced.</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00134">qpysharedarray.h:134</a></div></div>
<div class="ttc" id="aclassqtpyt_1_1QPySharedArray_html_aeb62bd2a87338c7016601788888629f1"><div class="ttname"><a href="classqtpyt_1_1QPySharedArray.html#aeb62bd2a87338c7016601788888629f1">qtpyt::QPySharedArray::isReadOnly</a></div><div class="ttdeci">bool isReadOnly() const</div><div class="ttdoc">Query whether the underlying storage is read-only. When set to true, the corresponding memoryview in ...</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00208">qpysharedarray.h:208</a></div></div>
<div class="ttc" id="anamespaceqtpyt_1_1detail_html_aa699c6a46404d74ec09f2a4ee24a9f5c"><div class="ttname"><a href="namespaceqtpyt_1_1detail.html#aa699c6a46404d74ec09f2a4ee24a9f5c">qtpyt::detail::make_owner</a></div><div class="ttdeci">std::shared_ptr&lt; OwnerState &gt; make_owner(void *estate, void(*deleter)(void *))</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00045">qpysharedarray.h:45</a></div></div>
<div class="ttc" id="anamespaceqtpyt_html"><div class="ttname"><a href="namespaceqtpyt.html">qtpyt</a></div><div class="ttdef"><b>Definition</b> <a href="globalinit_8h_source.html#l00003">globalinit.h:3</a></div></div>
<div class="ttc" id="astructqtpyt_1_1QPySharedArray_1_1Data_html"><div class="ttname"><a href="structqtpyt_1_1QPySharedArray_1_1Data.html">qtpyt::QPySharedArray::Data</a></div><div class="ttdoc">Internal storage object that holds either owned bytes or an external view.</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00236">qpysharedarray.h:236</a></div></div>
<div class="ttc" id="astructqtpyt_1_1QPySharedArray_1_1Data_html_a000a771ca297134b5f7dadf2d819c42a"><div class="ttname"><a href="structqtpyt_1_1QPySharedArray_1_1Data.html#a000a771ca297134b5f7dadf2d819c42a">qtpyt::QPySharedArray::Data::m_takeOwnership</a></div><div class="ttdeci">bool m_takeOwnership</div><div class="ttdoc">if true, delete[] extPtr on destruction</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00245">qpysharedarray.h:245</a></div></div>
<div class="ttc" id="astructqtpyt_1_1QPySharedArray_1_1Data_html_a09bb52d8aee2441f64acf0b2cf2efdb3"><div class="ttname"><a href="structqtpyt_1_1QPySharedArray_1_1Data.html#a09bb52d8aee2441f64acf0b2cf2efdb3">qtpyt::QPySharedArray::Data::ptr</a></div><div class="ttdeci">T * ptr()</div><div class="ttdoc">Pointer to element storage (owned or external).</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00275">qpysharedarray.h:275</a></div></div>
<div class="ttc" id="astructqtpyt_1_1QPySharedArray_1_1Data_html_a36a0b8b6179ee9a75dec0cafeda6fc1f"><div class="ttname"><a href="structqtpyt_1_1QPySharedArray_1_1Data.html#a36a0b8b6179ee9a75dec0cafeda6fc1f">qtpyt::QPySharedArray::Data::Data</a></div><div class="ttdeci">Data()=default</div></div>
<div class="ttc" id="astructqtpyt_1_1QPySharedArray_1_1Data_html_a3856b683114451e937724b35f6afc281"><div class="ttname"><a href="structqtpyt_1_1QPySharedArray_1_1Data.html#a3856b683114451e937724b35f6afc281">qtpyt::QPySharedArray::Data::reserve</a></div><div class="ttdeci">void reserve(size_type cap)</div><div class="ttdoc">Reserve capacity for at least cap elements.</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00335">qpysharedarray.h:335</a></div></div>
<div class="ttc" id="astructqtpyt_1_1QPySharedArray_1_1Data_html_a4f9dad6e41550fa544ae282838a37dc9"><div class="ttname"><a href="structqtpyt_1_1QPySharedArray_1_1Data.html#a4f9dad6e41550fa544ae282838a37dc9">qtpyt::QPySharedArray::Data::owned</a></div><div class="ttdeci">QByteArray owned</div><div class="ttdoc">owned bytes (when not external)</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00238">qpysharedarray.h:238</a></div></div>
<div class="ttc" id="astructqtpyt_1_1QPySharedArray_1_1Data_html_a56b71c123b28eadc6f08f2fcb3fbfb21"><div class="ttname"><a href="structqtpyt_1_1QPySharedArray_1_1Data.html#a56b71c123b28eadc6f08f2fcb3fbfb21">qtpyt::QPySharedArray::Data::m_readonly</a></div><div class="ttdeci">bool m_readonly</div><div class="ttdoc">read-only flag</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00246">qpysharedarray.h:246</a></div></div>
<div class="ttc" id="astructqtpyt_1_1QPySharedArray_1_1Data_html_a591c98e5fe796663f526041e08952d62"><div class="ttname"><a href="structqtpyt_1_1QPySharedArray_1_1Data.html#a591c98e5fe796663f526041e08952d62">qtpyt::QPySharedArray::Data::m_capacity</a></div><div class="ttdeci">size_type m_capacity</div><div class="ttdoc">capacity in elements</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00242">qpysharedarray.h:242</a></div></div>
<div class="ttc" id="astructqtpyt_1_1QPySharedArray_1_1Data_html_a5c1e9a5b61eceba45f1b5633ac3551a1"><div class="ttname"><a href="structqtpyt_1_1QPySharedArray_1_1Data.html#a5c1e9a5b61eceba45f1b5633ac3551a1">qtpyt::QPySharedArray::Data::m_size</a></div><div class="ttdeci">size_type m_size</div><div class="ttdoc">logical element count</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00241">qpysharedarray.h:241</a></div></div>
<div class="ttc" id="astructqtpyt_1_1QPySharedArray_1_1Data_html_a611e2372a29cc126e2516177ee3eeda7"><div class="ttname"><a href="structqtpyt_1_1QPySharedArray_1_1Data.html#a611e2372a29cc126e2516177ee3eeda7">qtpyt::QPySharedArray::Data::ensureOwnedStorage</a></div><div class="ttdeci">void ensureOwnedStorage(size_type cap)</div><div class="ttdoc">Ensure owned storage for at least cap elements.</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00308">qpysharedarray.h:308</a></div></div>
<div class="ttc" id="astructqtpyt_1_1QPySharedArray_1_1Data_html_a84885a86652ceebdbd0b83d2481e3a04"><div class="ttname"><a href="structqtpyt_1_1QPySharedArray_1_1Data.html#a84885a86652ceebdbd0b83d2481e3a04">qtpyt::QPySharedArray::Data::~Data</a></div><div class="ttdeci">~Data()</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00265">qpysharedarray.h:265</a></div></div>
<div class="ttc" id="astructqtpyt_1_1QPySharedArray_1_1Data_html_a8a25d86895886afb315be6a4d85a0acc"><div class="ttname"><a href="structqtpyt_1_1QPySharedArray_1_1Data.html#a8a25d86895886afb315be6a4d85a0acc">qtpyt::QPySharedArray::Data::extPtr</a></div><div class="ttdeci">T * extPtr</div><div class="ttdoc">external pointer when m_external is true</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00239">qpysharedarray.h:239</a></div></div>
<div class="ttc" id="astructqtpyt_1_1QPySharedArray_1_1Data_html_a90bb1fc7771572e19f8f0bf7d642afe4"><div class="ttname"><a href="structqtpyt_1_1QPySharedArray_1_1Data.html#a90bb1fc7771572e19f8f0bf7d642afe4">qtpyt::QPySharedArray::Data::Data</a></div><div class="ttdeci">Data(const Data &amp;o)</div><div class="ttdoc">Copy constructor: copies view/owner semantics for external buffers.</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00255">qpysharedarray.h:255</a></div></div>
<div class="ttc" id="astructqtpyt_1_1QPySharedArray_1_1Data_html_a913a7ec8b9b5afb5bfb88b0dd6526fe1"><div class="ttname"><a href="structqtpyt_1_1QPySharedArray_1_1Data.html#a913a7ec8b9b5afb5bfb88b0dd6526fe1">qtpyt::QPySharedArray::Data::ptr</a></div><div class="ttdeci">const T * ptr() const</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00278">qpysharedarray.h:278</a></div></div>
<div class="ttc" id="astructqtpyt_1_1QPySharedArray_1_1Data_html_a9368e669664d333e4eb571c3a4b1f222"><div class="ttname"><a href="structqtpyt_1_1QPySharedArray_1_1Data.html#a9368e669664d333e4eb571c3a4b1f222">qtpyt::QPySharedArray::Data::m_external</a></div><div class="ttdeci">bool m_external</div><div class="ttdoc">true when using extPtr</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00244">qpysharedarray.h:244</a></div></div>
<div class="ttc" id="astructqtpyt_1_1QPySharedArray_1_1Data_html_ae7f68b4e6ab7a25733afc014a05ab73e"><div class="ttname"><a href="structqtpyt_1_1QPySharedArray_1_1Data.html#ae7f68b4e6ab7a25733afc014a05ab73e">qtpyt::QPySharedArray::Data::owner</a></div><div class="ttdeci">std::shared_ptr&lt; detail::OwnerState &gt; owner</div><div class="ttdoc">optional owner that keeps external source alive</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00248">qpysharedarray.h:248</a></div></div>
<div class="ttc" id="astructqtpyt_1_1QPySharedArray_1_1Data_html_ae819e56b3813b3562129be9814b0a72b"><div class="ttname"><a href="structqtpyt_1_1QPySharedArray_1_1Data.html#ae819e56b3813b3562129be9814b0a72b">qtpyt::QPySharedArray::Data::resize</a></div><div class="ttdeci">void resize(size_type n)</div><div class="ttdoc">Resize logical element count to n.</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00348">qpysharedarray.h:348</a></div></div>
<div class="ttc" id="astructqtpyt_1_1QPySharedArray_1_1Data_html_af5f494c3a2101ab22330e549696aea11"><div class="ttname"><a href="structqtpyt_1_1QPySharedArray_1_1Data.html#af5f494c3a2101ab22330e549696aea11">qtpyt::QPySharedArray::Data::resetToExternal</a></div><div class="ttdeci">void resetToExternal(T *p, size_type n, bool takeOwn, std::shared_ptr&lt; detail::OwnerState &gt; keepAlive)</div><div class="ttdoc">Reset this Data to reference an external buffer.</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00289">qpysharedarray.h:289</a></div></div>
<div class="ttc" id="astructqtpyt_1_1detail_1_1OwnerState_html"><div class="ttname"><a href="structqtpyt_1_1detail_1_1OwnerState.html">qtpyt::detail::OwnerState</a></div><div class="ttdoc">Helper that holds a void pointer and a deleter to manage external lifetime.</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00032">qpysharedarray.h:32</a></div></div>
<div class="ttc" id="astructqtpyt_1_1detail_1_1OwnerState_html_a2a9721308d6434d5bd54d0c3e8f7e5ac"><div class="ttname"><a href="structqtpyt_1_1detail_1_1OwnerState.html#a2a9721308d6434d5bd54d0c3e8f7e5ac">qtpyt::detail::OwnerState::estate</a></div><div class="ttdeci">void * estate</div><div class="ttdoc">pointer to external state (opaque)</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00033">qpysharedarray.h:33</a></div></div>
<div class="ttc" id="astructqtpyt_1_1detail_1_1OwnerState_html_a6630e4ada7700255e3f3261dca7a84b6"><div class="ttname"><a href="structqtpyt_1_1detail_1_1OwnerState.html#a6630e4ada7700255e3f3261dca7a84b6">qtpyt::detail::OwnerState::OwnerState</a></div><div class="ttdeci">OwnerState(void *c, void(*d)(void *))</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00037">qpysharedarray.h:37</a></div></div>
<div class="ttc" id="astructqtpyt_1_1detail_1_1OwnerState_html_abf8ff68991e369d5f7d37bdf34e764ae"><div class="ttname"><a href="structqtpyt_1_1detail_1_1OwnerState.html#abf8ff68991e369d5f7d37bdf34e764ae">qtpyt::detail::OwnerState::~OwnerState</a></div><div class="ttdeci">~OwnerState()</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00038">qpysharedarray.h:38</a></div></div>
<div class="ttc" id="astructqtpyt_1_1detail_1_1OwnerState_html_ac37d12668b53344b2a0cfd44cfb4998b"><div class="ttname"><a href="structqtpyt_1_1detail_1_1OwnerState.html#ac37d12668b53344b2a0cfd44cfb4998b">qtpyt::detail::OwnerState::deleter</a></div><div class="ttdeci">void(* deleter)(void *)</div><div class="ttdoc">custom deleter for the external state</div><div class="ttdef"><b>Definition</b> <a href="qpysharedarray_8h_source.html#l00034">qpysharedarray.h:34</a></div></div>
<div class="ttc" id="astructqtpyt_1_1detail_1_1OwnerState_html_ad9051c845dc7a27c5a34b28fb976e7fa"><div class="ttname"><a href="structqtpyt_1_1detail_1_1OwnerState.html#ad9051c845dc7a27c5a34b28fb976e7fa">qtpyt::detail::OwnerState::OwnerState</a></div><div class="ttdeci">OwnerState()=default</div></div>
<div class="ttc" id="astructqtpyt_1_1detail_1_1OwnerState_html_aed755c437ac1464b6fff11fe695110b0"><div class="ttname"><a href="structqtpyt_1_1detail_1_1OwnerState.html#aed755c437ac1464b6fff11fe695110b0">qtpyt::detail::OwnerState::OwnerState</a></div><div class="ttdeci">OwnerState(const OwnerState &amp;)=delete</div></div>
<div class="ttc" id="astructqtpyt_1_1detail_1_1OwnerState_html_af0725dd756ebb8bf8f82b9546722418f"><div class="ttname"><a href="structqtpyt_1_1detail_1_1OwnerState.html#af0725dd756ebb8bf8f82b9546722418f">qtpyt::detail::OwnerState::operator=</a></div><div class="ttdeci">OwnerState &amp; operator=(const OwnerState &amp;)=delete</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
